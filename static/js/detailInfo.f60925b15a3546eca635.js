webpackJsonp([2],{11:function(e,t,a){function n(e){a(38)}var o=a(4)(a(21),a(42),n,"data-v-e99e741a",null);e.exports=o.exports},12:function(e,t){},178:function(e,t,a){"use strict";var n=a(2),o=a.n(n),i=a(177),l=a(11),s=a.n(l);o.a.use(i.a),t.a=new i.a({routes:[{path:"/register/detailInfo",name:"detailInfo",component:s.a}]})},20:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{multiple:{type:Boolean,twoWay:!1},id:{type:String,twoWay:!1},url:{type:Array,twoWay:!0}},data:function(){return{region:"Your oss Region",bucket:"Bucket Name"}},methods:{doUpload:function(){var e=this;Vue.http.get("/alioss/getOssToken").then(function(t){var a=new OSS.Wrapper({region:e.region,accessKeyId:t.data.token.AccessKeyId,accessKeySecret:t.data.token.AccessKeySecret,stsToken:t.data.token.SecurityToken,bucket:e.bucket});document.getElementById(e.id).files&&function(){for(var t=document.getElementById(e.id).files,n=[],o=0;o<t.length;o++){var i=t[o],l=i.name;a.multipartUpload(l,i,{}).then(function(e){e.url&&n.push(e.url)}).catch(function(e){console.log(e)})}e.url=n}()})}}}},21:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),o=(a.n(n),a(23)),i=a(40);a.n(i);t.default={name:"DetailInfo",data:function(){return{hostname:"47.94.129.112",step:2,form:{name:"",address:"",birthday:"",gender:"",school:""},schools:""}},methods:{onSubmit:function(){console.log("submit!")},pickerOptions0:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},querySearch:function(e,t){var a=this.schools;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return 0===t.value.indexOf(e.toLowerCase())}},_onSubmitStep2:function(){this.step=3},_onSubmitStep3:function(){var e=this;fetch("http://"+e.hostname+"/api/set_detailInfo",{method:"post",body:"username="+localStorage.username+"&name="+e.form.name+"&address="+e.form.address+"&birthday="+e.form.birthday+"&gender="+e.form.gender+"&school="+e.form.school,headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.json()}).then(function(e){e.msg})}},mounted:function(){this.schools=o.a,$(window).load(function(){this.step=3;var e={thumbBox:".thumbBox",spinner:".spinner",imgSrc:"../../../static/imgs/avatar.jpg"},t=$(".imageBox").cropbox(e);$("#upload-file").on("change",function(){var a=new FileReader;a.onload=function(a){e.imgSrc=a.target.result,t=$(".imageBox").cropbox(e)},a.readAsDataURL(this.files[0])}),$("#btnCrop").on("click",function(){var e=t.getDataURL();console.log(e),$(".cropped").html(""),$(".cropped").append('<img src="'+e+'" align="absmiddle" style="width:64px;margin-top:4px;border-radius:64px;box-shadow:0px 0px 12px #7E7E7E;" ><p>64px*64px</p>'),$(".cropped").append('<img src="'+e+'" align="absmiddle" style="width:128px;margin-top:4px;border-radius:128px;box-shadow:0px 0px 12px #7E7E7E;"><p>128px*128px</p>'),$(".cropped").append('<img src="'+e+'" align="absmiddle" style="width:180px;margin-top:4px;border-radius:180px;box-shadow:0px 0px 12px #7E7E7E;"><p>180px*180px</p>')}),$("#btnZoomIn").on("click",function(){t.zoomIn()}),$("#btnZoomOut").on("click",function(){t.zoomOut()})})}}},215:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),o=a.n(n),i=a(11),l=a.n(i),s=a(178),r=a(18),u=a.n(r),c=a(12);a.n(c);o.a.config.productionTip=!1,o.a.use(u.a),new o.a({el:"#detailInfo",router:s.a,template:"<detailInfo/>",components:{detailInfo:l.a}})},22:function(e,t,a){"use strict";var n,o,i;!function(l){o=[a(39)],n=l,void 0!==(i="function"==typeof n?n.apply(t,o):n)&&(e.exports=i)}(function(e){var t=function(t,a){var a=a||e(t.imageBox),n={state:{},ratio:1,options:t,imageBox:a,thumbBox:a.find(t.thumbBox),spinner:a.find(t.spinner),image:new Image,getDataURL:function(){var e=this.thumbBox.width(),t=this.thumbBox.height(),n=document.createElement("canvas"),o=a.css("background-position").split(" "),i=a.css("background-size").split(" "),l=parseInt(o[0])-a.width()/2+e/2,s=parseInt(o[1])-a.height()/2+t/2,r=parseInt(i[0]),u=parseInt(i[1]),c=parseInt(this.image.height),p=parseInt(this.image.width);return n.width=e,n.height=t,n.getContext("2d").drawImage(this.image,0,0,p,c,l,s,r,u),n.toDataURL("image/png")},getBlob:function(){for(var e=this.getDataURL(),t=e.replace("data:image/png;base64,",""),a=atob(t),n=[],o=0;o<a.length;o++)n.push(a.charCodeAt(o));return new Blob([new Uint8Array(n)],{type:"image/png"})},zoomIn:function(){this.ratio*=1.1,o()},zoomOut:function(){this.ratio*=.9,o()}},o=function(){var e=parseInt(n.image.width)*n.ratio,t=parseInt(n.image.height)*n.ratio,o=(a.width()-e)/2,i=(a.height()-t)/2;a.css({"background-image":"url("+n.image.src+")","background-size":e+"px "+t+"px","background-position":o+"px "+i+"px","background-repeat":"no-repeat"})},i=function(e){e.stopImmediatePropagation(),n.state.dragable=!0,n.state.mouseX=e.clientX,n.state.mouseY=e.clientY},l=function(e){if(e.stopImmediatePropagation(),n.state.dragable){var t=e.clientX-n.state.mouseX,o=e.clientY-n.state.mouseY,i=a.css("background-position").split(" "),l=t+parseInt(i[0]),s=o+parseInt(i[1]);a.css("background-position",l+"px "+s+"px"),n.state.mouseX=e.clientX,n.state.mouseY=e.clientY}},s=function(e){e.stopImmediatePropagation(),n.state.dragable=!1},r=function(e){e.originalEvent.wheelDelta>0||e.originalEvent.detail<0?n.ratio*=1.1:n.ratio*=.9,o()};return n.spinner.show(),n.image.onload=function(){n.spinner.hide(),o(),a.bind("mousedown",i),a.bind("mousemove",l),e(window).bind("mouseup",s),a.bind("mousewheel DOMMouseScroll",r)},n.image.src=t.imgSrc,a.on("remove",function(){e(window).unbind("mouseup",s)}),n};jQuery.fn.cropbox=function(e){return new t(e,this)}})},23:function(e,t,a){"use strict";var n=[{value:"浙江大学"},{value:"杭州电子科技大学"},{value:"浙江工业大学"},{value:"浙江理工大学"},{value:"浙江海洋大学"},{value:"浙江农林大学"},{value:"温州医科大学"},{value:"浙江中医药大学"},{value:"浙江师范大学"},{value:"杭州师范大学"},{value:"湖州师范学院"},{value:"绍兴文理学院"},{value:"台州学院"},{value:"温州大学"},{value:"丽水学院"},{value:"浙江工商大学"},{value:"嘉兴学院"},{value:"中国美术学院"},{value:"中国计量大学"},{value:"公安海警学院"},{value:"浙江万里学院"},{value:"浙江科技学院"},{value:"宁波工程学院"},{value:"浙江水利水电学院"},{value:"浙江财经大学"},{value:"浙江警察学院"},{value:"衢州学院"},{value:"宁波大学"},{value:"浙江传媒学院"},{value:"浙江树人学院"},{value:"浙江越秀外国语学院"},{value:"宁波大红鹰学院"},{value:"浙江大学城市学院"},{value:"浙江大学宁波理工学院"},{value:"杭州医学院"},{value:"浙江工业大学之江学院"},{value:"浙江师范大学行知学院"},{value:"宁波大学科学技术学院"},{value:"杭州电子科技大学信息工程学院"},{value:"浙江理工大学科技与艺术学院"},{value:"浙江海洋大学东海科学技术学院"},{value:"浙江农林大学暨阳学院"},{value:"温州医科大学仁济学院"},{value:"浙江中医药大学滨江学院"},{value:"杭州师范大学钱江学院"},{value:"湖州师范学院求真学院"},{value:"绍兴文理学院元培学院"},{value:"温州大学瓯江学院"},{value:"浙江工商大学杭州商学院"},{value:"嘉兴学院南湖学院"},{value:"中国计量大学现代科技学院"},{value:"浙江财经大学东方学院"},{value:"温州商学院"},{value:"同济大学浙江学院"},{value:"上海财经大学浙江学院"},{value:"浙江外国语学院"},{value:"浙江音乐学院"},{value:"宁波诺丁汉大学"},{value:"温州肯恩大学"},{value:"宁波职业技术学院"},{value:"温州职业技术学院"},{value:"浙江交通职业技术学院"},{value:"金华职业技术学院"},{value:"宁波城市职业技术学院"},{value:"浙江电力职业技术学院"},{value:"浙江同济科技职业学院"},{value:"浙江工商职业技术学院"},{value:"台州职业技术学院"},{value:"浙江工贸职业技术学院"},{value:"浙江医药高等专科学校"},{value:"浙江机电职业技术学院"},{value:"浙江建设职业技术学院"},{value:"浙江艺术职业学院"},{value:"浙江经贸职业技术学院"},{value:"浙江商业职业技术学院"},{value:"浙江经济职业技术学院"},{value:"浙江旅游职业学院"},{value:"浙江育英职业技术学院"},{value:"浙江警官职业学院"},{value:"浙江金融职业学院"},{value:"浙江工业职业技术学院"},{value:"杭州职业技术学院"},{value:"嘉兴职业技术学院"},{value:"湖州职业技术学院"},{value:"绍兴职业技术学院"},{value:"衢州职业技术学院"},{value:"丽水职业技术学院"},{value:"浙江东方职业技术学院"},{value:"义乌工商职业技术学院"},{value:"浙江纺织服装职业技术学院"},{value:"杭州科技职业技术学院"},{value:"浙江长征职业技术学院"},{value:"嘉兴南洋职业技术学院"},{value:"浙江广厦建设职业技术学院"},{value:"杭州万向职业技术学院"},{value:"浙江邮电职业技术学院"},{value:"宁波卫生职业技术学院"},{value:"台州科技职业学院"},{value:"浙江国际海运职业技术学院"},{value:"浙江体育职业技术学院"},{value:"温州科技职业学院"},{value:"浙江汽车职业技术学院"},{value:"浙江横店影视职业学院"},{value:"浙江农业商贸职业学院"},{value:"浙江特殊教育职业学院"},{value:"浙江安防职业技术学院"},{value:"浙江舟山群岛新区旅游与健康职业学院"}];t.a=n},37:function(e,t){},38:function(e,t){},40:function(e,t,a){function n(e){a(37)}var o=a(4)(a(20),a(41),n,null,null);e.exports=o.exports},41:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"oss_file"},[a("input",{attrs:{type:"file",id:e.id,multiple:e.multiple},on:{change:e.doUpload}})])])},staticRenderFns:[]}},42:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"DetailInfo"}},[3===e.step?a("div",{staticClass:"detailInfo-main-part"},[a("div",{staticClass:"detailInfo-steps-div"},[a("el-steps",{attrs:{space:200,active:e.step}},[a("el-step",{attrs:{title:"步骤 1",icon:"edit"}}),e._v(" "),a("el-step",{attrs:{title:"步骤 2",icon:"picture"}}),e._v(" "),a("el-step",{attrs:{title:"步骤 3",icon:"information"}})],1)],1),e._v(" "),a("transition",{attrs:{name:"fade"}},[a("div",{staticClass:"detaiInfo-form"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"250px"}},[a("el-form-item",{attrs:{label:"你是凹还是凸？"}},[a("el-radio-group",{model:{value:e.form.gender,callback:function(t){e.form.gender=t},expression:"form.gender"}},[a("el-radio",{attrs:{label:"男"}}),e._v(" "),a("el-radio",{attrs:{label:"女"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"在哪读大学？给你介绍学妹"}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入学校","trigger-on-focus":!1},on:{select:e.handleSelect},model:{value:e.form.school,callback:function(t){e.form.school=t},expression:"form.school"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"告诉我你几岁,看看算不算犯罪"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","picker-options":e.pickerOptions0},model:{value:e.form.birthday,callback:function(t){e.form.birthday=t},expression:"form.birthday"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"讲道理，每个人总有个称谓把"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.form.name=t},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"家庭住址你敢随便告诉我？"}},[a("el-input",{model:{value:e.form.address,callback:function(t){e.form.address=t},expression:"form.address"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e._onSubmitStep3}},[e._v("提交信息")]),e._v(" "),a("el-button",{attrs:{type:"warning"}},[e._v("过两天再来填")])],1)],1)],1)])],1):e._e(),e._v(" "),2==e.step?a("div",{},[a("div",{staticClass:"detailInfo-step3-div"},[a("el-steps",{attrs:{space:200,active:2}},[a("el-step",{attrs:{title:"步骤 1",icon:"edit"}}),e._v(" "),a("el-step",{attrs:{title:"步骤 2",icon:"picture"}}),e._v(" "),a("el-step",{attrs:{title:"步骤 3",icon:"information"}})],1)],1),e._v(" "),a("transition",{attrs:{name:"fade"}},[a("div",{staticClass:"headpic-uploader"},[a("div",{staticClass:"container"},[a("div",{staticClass:"imageBox"},[a("div",{staticClass:"thumbBox"}),e._v(" "),a("div",{staticClass:"spinner",staticStyle:{display:"none"}},[e._v("Loading...")])]),e._v(" "),a("div",{staticClass:"action"},[a("div",{staticClass:"new-contentarea tc"},[a("a",{staticClass:"upload-img",attrs:{href:"javascript:void(0)"}},[a("label",{attrs:{for:"upload-file"}},[e._v("上传图像")])]),e._v(" "),a("input",{attrs:{type:"file",name:"upload-file",id:"upload-file"}})]),e._v(" "),a("input",{staticClass:"Btnsty_peyton",attrs:{type:"button",id:"btnCrop",value:"裁切"}}),e._v(" "),a("input",{staticClass:"Btnsty_peyton",attrs:{type:"button",id:"btnZoomIn",value:"+"}}),e._v(" "),a("input",{staticClass:"Btnsty_peyton",attrs:{type:"button",id:"btnZoomOut",value:"-"}})]),e._v(" "),a("div",{staticClass:"cropped"})]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e._onSubmitStep2}},[e._v("就决定是这个头像了")])],1)])],1):e._e()])},staticRenderFns:[]}}},[215]);
//# sourceMappingURL=detailInfo.f60925b15a3546eca635.js.map